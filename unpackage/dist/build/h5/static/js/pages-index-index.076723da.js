(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{3600:function(t,e,n){"use strict";var i=n("ee27");n("d3b7"),n("ac1f"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var r=i(n("c964")),a=i(n("45b7")),o=i(n("8330")),s=n("4ced"),l={data:function(){return{data:[],banner_list:[],bgColor:"",bg_color_shade:"",navigation:[],recommendList:[],user_type:"",profit:0,name:"方梓臻",poster:{},qrShow:!1,canvasId:"default_PosterCanvasId",tee:""}},onShow:function(){this.res(),this.getClassification();var t=uni.getStorageSync("userinfor");console.log(t),this.userinfor=t,this.user_type=t.plugins_distribution_level,console.log(this.user_type)},onLoad:function(){},onPullDownRefresh:function(){this.res()},methods:{res:function(){var t=this,e={};a.default.post("index/index",e).then((function(e){t.data=e.data,t.banner_list=e.data.banner_list,console.log(t.banner_list),t.bgColor=e.data.banner_list[0].bg_color,t.bg_color_shade=e.data.banner_list[0].bg_color_shade,t.recommendList=e.data.data_list,console.log(e.data.data_list),uni.stopPullDownRefresh()}))},getClassification:function(){var t=this,e={};a.default.post("goods/category",e).then((function(e){console.log(e.data),t.navigation=e.data}))},search:function(t){var e;e=""==t.detail.value||null==t.detail.value||void 0==t.detail.value?this.data.common_shop_notice:t.detail.value,uni.navigateTo({url:"/pages/index/searchList?keywords="+encodeURIComponent(JSON.stringify(e))})},swiperChange:function(t){var e=t.detail.current;this.bgColor=this.banner_list[e].bg_color,this.bg_color_shade=this.banner_list[e].bg_color_shade},navToDetailPage:function(t){uni.navigateTo({url:"/pages/productDetails/productDetails?goods_id="+t})},navToDetailList:function(t,e){uni.navigateTo({url:"/pages/productList/productList?goods_id="+t+"&classification="+encodeURIComponent(JSON.stringify(e))})},navTo:function(t){"招募令"==t&&uni.navigateTo({url:"/pages/mine/collection?name=zhaomuling"})},geterweima:function(t,e){var n=this,i=this;console.log(this.userinfor.avatar);var r=this.checkLogin("/pages/index/index");if(r){var o={goods_id:t,goods_url:"https://m.ttianxuan.com/pages/productDetails/productDetails?goods_id="+t},s=e.simple_desc.split("\n")[0].split(".")[1];a.default.post("share/index",o).then((function(t){console.log(t.data);var r=e.home_recommended_images.split("com/")[1],a=t.data.user_share_qrode.split("com/")[1];uni.downloadFile({url:r,success:function(t){r=t.tempFilePath}}),uni.downloadFile({url:a,success:function(t){a=t.tempFilePath}});var o={titleImg:i.tee,name:n.get_user_type().nickname,erweima:a,img:r,tuijianTxt:s,danjia:e.min_price,title:e.title};console.log(o),n.shareFc(o)}))}},shareFc:function(t){var e=this;return(0,r.default)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,o.default.log("准备生成:"+new Date),n.next=4,(0,s.getSharePoster)({_this:e,type:"testShareType",formData:{},posterCanvasId:e.canvasId,delayTimeScale:20,background:{width:535,height:1020,backgroundColor:"#fff"},drawArray:function(e){e.bgObj,e.type,e.bgScale;return new Promise((function(e,n){e([{type:"image",url:"/static/images/fendi.png",dx:-1,dy:0,dWidth:286,dHeight:45},{type:"image",url:"/static/images/login_logo.png",dx:83,dy:64,dWidth:30,dHeight:30,infoCallBack:function(t){return{circleSet:{x:0}}}},{type:"text",fontFamily:"SourceHanSansCN-Regular",text:t.name+"向你推荐",size:13,color:"#333333",textAlign:"left",textBaseline:"middle",dx:118,dy:80},{type:"text",fontFamily:"SourceHanSansCN-Regular",text:'"'+t.tuijianTxt+'"',size:14,color:"#333333",textAlign:"left",textBaseline:"middle",dx:65,dy:112,lineFeed:{lineHeight:13,lineNum:2,dx:-1}},{type:"image",url:t.img,dx:0,dy:130,dWidth:285,dHeight:285},{type:"text",fontFamily:"Akrobat-Regular",text:"￥",size:18,color:"#FE7956",textAlign:"left",textBaseline:"middle",dx:13,dy:473},{type:"text",fontFamily:"Akrobat-Regular",text:t.danjia,size:28,color:"#FE7956",textAlign:"left",textBaseline:"middle",dx:30,dy:470},{type:"text",fontFamily:"SourceHanSansCN-Regular",text:t.title,size:12,color:"#333",textAlign:"left",textBaseline:"middle",dx:20,dy:500,lineFeed:{maxWidth:120,lineHeight:17,lineNum:2,dx:-1}},{type:"text",fontFamily:"SourceHanSansCN-Regular",text:"长按享低价",size:10,color:"#AEAEAE",textAlign:"left",textBaseline:"middle",dx:194,dy:520},{type:"image",url:t.erweima,dx:180,dy:430,dWidth:80,dHeight:80}])}))},setCanvasWH:function(t){var n=t.bgObj;t.type,t.bgScale;e.poster=n}});case 4:i=n.sent,o.default.log("海报生成成功, 时间:"+new Date+"， 临时路径: "+i.poster.tempFilePath),e.poster.finalPath=i.poster.tempFilePath,e.qrShow=!0,n.next=15;break;case 10:n.prev=10,n.t0=n["catch"](0),o.default.hideLoading(),o.default.showToast(JSON.stringify(n.t0)),console.log(JSON.stringify(n.t0));case 15:case"end":return n.stop()}}),n,null,[[0,10]])})))()},saveImage:function(){o.default.showToast("保存了")},share:function(){o.default.showToast("分享了")},hideQr:function(){this.qrShow=!1}}};e.default=l},"45b7":function(t,e,n){n("d3b7");var i="https://api.ttianxuan.com/";function r(t,e){var n=new Promise((function(n,r){if(""==e||void 0==e||null==e)var a={},o=JSON.stringify(a);else o=JSON.stringify(e);var s="",l="",u=uni.getStorageSync("request_user_token");l=""==u||null==u||void 0==u?"":u,uni.request({url:i+"index.php?s=/api/"+t+s+"&application=app&application_client_type=weixin&token="+l+"&ajax=ajax",data:o,method:"POST",header:{"content-type":"application/json; charset=utf-8"},success:function(t){uni.showLoading({title:"加载中..."}),200==t.statusCode?(n(t.data),uni.hideLoading()):n(t.data.msg)},error:function(t){r("网络出错"),uni.hideLoading()}})}));return n}function a(t,e){var n=new Promise((function(n,r){var a=e;uni.request({url:i+t,data:a,method:"GET",dataType:"json",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){t.statusCode,n(t.data)},error:function(t){r("网络出错")}})}));return n}t.exports={post:r,get:a}},"45f0":function(t,e,n){"use strict";function i(t){var e,n,i;return t<128?[t]:t<2048?(e=192+(t>>6),n=128+(63&t),[e,n]):(e=224+(t>>12),n=128+(t>>6&63),i=128+(63&t),[e,n,i])}function r(t){for(var e=[],n=0;n<t.length;n++)for(var r=t.charCodeAt(n),a=i(r),o=0;o<a.length;o++)e.push(a[o]);return e}function a(t,e){this.typeNumber=-1,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.rsBlocks=null,this.totalDataCount=-1,this.data=t,this.utf8bytes=r(t),this.make()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a,a.prototype={constructor:a,getModuleCount:function(){return this.moduleCount},make:function(){this.getRightType(),this.dataCache=this.createData(),this.createQrcode()},makeImpl:function(t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[e]=new Array(this.moduleCount);this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(!0,t),this.typeNumber>=7&&this.setupTypeNumber(!0),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(this.modules[t+n][e+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},createQrcode:function(){for(var t=0,e=0,n=null,i=0;i<8;i++){this.makeImpl(i);var r=l.getLostPoint(this);(0==i||t>r)&&(t=r,e=i,n=this.modules)}this.modules=n,this.setupTypeInfo(!1,e),this.typeNumber>=7&&this.setupTypeNumber(!1)},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0,null==this.modules[6][t]&&(this.modules[6][t]=t%2==0))},setupPositionAdjustPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],r=t[n];if(null==this.modules[i][r])for(var a=-2;a<=2;a++)for(var o=-2;o<=2;o++)this.modules[i+a][r+o]=-2==a||2==a||-2==o||2==o||0==a&&0==o}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i,this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(t,e){for(var n=o[this.errorCorrectLevel]<<3|e,i=l.getBCHTypeInfo(n),r=0;r<15;r++){var a=!t&&1==(i>>r&1);r<6?this.modules[r][8]=a:r<8?this.modules[r+1][8]=a:this.modules[this.moduleCount-15+r][8]=a;a=!t&&1==(i>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=a:r<9?this.modules[8][15-r-1+1]=a:this.modules[8][15-r-1]=a}this.modules[this.moduleCount-8][8]=!t},createData:function(){var t=new g,e=this.typeNumber>9?16:8;t.put(4,4),t.put(this.utf8bytes.length,e);for(var n=0,i=this.utf8bytes.length;n<i;n++)t.put(this.utf8bytes[n],8);t.length+4<=8*this.totalDataCount&&t.put(0,4);while(t.length%8!=0)t.putBit(!1);while(1){if(t.length>=8*this.totalDataCount)break;if(t.put(a.PAD0,8),t.length>=8*this.totalDataCount)break;t.put(a.PAD1,8)}return this.createBytes(t)},createBytes:function(t){for(var e=0,n=0,i=0,r=this.rsBlock.length/3,a=new Array,o=0;o<r;o++)for(var s=this.rsBlock[3*o+0],u=this.rsBlock[3*o+1],c=this.rsBlock[3*o+2],d=0;d<s;d++)a.push([c,u]);for(var g=new Array(a.length),h=new Array(a.length),m=0;m<a.length;m++){var p=a[m][0],v=a[m][1]-p;n=Math.max(n,p),i=Math.max(i,v),g[m]=new Array(p);for(o=0;o<g[m].length;o++)g[m][o]=255&t.buffer[o+e];e+=p;var b=l.getErrorCorrectPolynomial(v),y=new f(g[m],b.getLength()-1),w=y.mod(b);h[m]=new Array(b.getLength()-1);for(o=0;o<h[m].length;o++){var x=o+w.getLength()-h[m].length;h[m][o]=x>=0?w.get(x):0}}var k=new Array(this.totalDataCount),A=0;for(o=0;o<n;o++)for(m=0;m<a.length;m++)o<g[m].length&&(k[A++]=g[m][o]);for(o=0;o<i;o++)for(m=0;m<a.length;m++)o<h[m].length&&(k[A++]=h[m][o]);return k},mapData:function(t,e){for(var n=-1,i=this.moduleCount-1,r=7,a=0,o=this.moduleCount-1;o>0;o-=2){6==o&&o--;while(1){for(var s=0;s<2;s++)if(null==this.modules[i][o-s]){var u=!1;a<t.length&&(u=1==(t[a]>>>r&1));var c=l.getMask(e,i,o-s);c&&(u=!u),this.modules[i][o-s]=u,r--,-1==r&&(a++,r=7)}if(i+=n,i<0||this.moduleCount<=i){i-=n,n=-n;break}}}}},a.PAD0=236,a.PAD1=17;for(var o=[1,0,3,2],s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(l.getBCHDigit(e)-l.getBCHDigit(l.G15)>=0)e^=l.G15<<l.getBCHDigit(e)-l.getBCHDigit(l.G15);return(t<<10|e)^l.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(l.getBCHDigit(e)-l.getBCHDigit(l.G18)>=0)e^=l.G18<<l.getBCHDigit(e)-l.getBCHDigit(l.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case s.PATTERN000:return(e+n)%2==0;case s.PATTERN001:return e%2==0;case s.PATTERN010:return n%3==0;case s.PATTERN011:return(e+n)%3==0;case s.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case s.PATTERN101:return e*n%2+e*n%3==0;case s.PATTERN110:return(e*n%2+e*n%3)%2==0;case s.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new f([1],0),n=0;n<t;n++)e=e.multiply(new f([1,u.gexp(n)],0));return e},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0,r=0;r<e;r++)for(var a=0,o=t.modules[r][0],s=0;s<e;s++){var l=t.modules[r][s];if(s<e-6&&l&&!t.modules[r][s+1]&&t.modules[r][s+2]&&t.modules[r][s+3]&&t.modules[r][s+4]&&!t.modules[r][s+5]&&t.modules[r][s+6]&&(s<e-10?t.modules[r][s+7]&&t.modules[r][s+8]&&t.modules[r][s+9]&&t.modules[r][s+10]&&(n+=40):s>3&&t.modules[r][s-1]&&t.modules[r][s-2]&&t.modules[r][s-3]&&t.modules[r][s-4]&&(n+=40)),r<e-1&&s<e-1){var u=0;l&&u++,t.modules[r+1][s]&&u++,t.modules[r][s+1]&&u++,t.modules[r+1][s+1]&&u++,0!=u&&4!=u||(n+=3)}o^l?a++:(o=l,a>=5&&(n+=3+a-5),a=1),l&&i++}for(s=0;s<e;s++)for(a=0,o=t.modules[0][s],r=0;r<e;r++){l=t.modules[r][s];r<e-6&&l&&!t.modules[r+1][s]&&t.modules[r+2][s]&&t.modules[r+3][s]&&t.modules[r+4][s]&&!t.modules[r+5][s]&&t.modules[r+6][s]&&(r<e-10?t.modules[r+7][s]&&t.modules[r+8][s]&&t.modules[r+9][s]&&t.modules[r+10][s]&&(n+=40):r>3&&t.modules[r-1][s]&&t.modules[r-2][s]&&t.modules[r-3][s]&&t.modules[r-4][s]&&(n+=40)),o^l?a++:(o=l,a>=5&&(n+=3+a-5),a=1)}var c=Math.abs(100*i/e/e-50)/5;return n+=10*c,n}},u={glog:function(t){if(t<1)throw new Error("glog("+t+")");return u.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return u.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},c=0;c<8;c++)u.EXP_TABLE[c]=1<<c;for(c=8;c<256;c++)u.EXP_TABLE[c]=u.EXP_TABLE[c-4]^u.EXP_TABLE[c-5]^u.EXP_TABLE[c-6]^u.EXP_TABLE[c-8];for(c=0;c<255;c++)u.LOG_TABLE[u.EXP_TABLE[c]]=c;function f(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var n=0;while(n<t.length&&0==t[n])n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}f.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=u.gexp(u.glog(this.get(n))+u.glog(t.get(i)));return new f(e,0)},mod:function(t){var e=this.getLength(),n=t.getLength();if(e-n<0)return this;for(var i=new Array(e),r=0;r<e;r++)i[r]=this.get(r);while(i.length>=n){var a=u.glog(i[0])-u.glog(t.get(0));for(r=0;r<t.getLength();r++)i[r]^=u.gexp(u.glog(t.get(r))+a);while(0==i[0])i.shift()}return new f(i,0)}};var d=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];function g(){this.buffer=new Array,this.length=0}a.prototype.getRightType=function(){for(var t=1;t<41;t++){var e=d[4*(t-1)+this.errorCorrectLevel];if(void 0==e)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+this.errorCorrectLevel);for(var n=e.length/3,i=0,r=0;r<n;r++){var a=e[3*r+0],o=e[3*r+2];i+=o*a}var s=t>9?2:1;if(this.utf8bytes.length+s<i||40==t){this.typeNumber=t,this.rsBlock=e,this.totalDataCount=i;break}}},g.prototype={get:function(t){var e=Math.floor(t/8);return this.buffer[e]>>>7-t%8&1},put:function(t,e){for(var n=0;n<e;n++)this.putBit(t>>>e-n-1&1)},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}}},"4ced":function(t,e,n){"use strict";var i=n("ee27");n("cb29"),n("4160"),n("4e82"),n("a9e3"),n("b680"),n("542d"),n("d3b7"),n("ac1f"),n("1276"),n("498a"),n("159b");var r=i(n("d0ff")),a=i(n("f3f3"));n("96cf");var o=i(n("c964")),s=i(n("8330")),l=i(n("45f0")),u="QSSHAREPOSTER_IDKEY",c=1;function f(t){return new Promise(function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(n,i){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(t);case 3:r=e.sent,n(r),e.next=21;break;case 7:return e.prev=7,e.t0=e["catch"](0),e.prev=9,t.bgScale?t.bgScale=Number(t.bgScale)-.1:c-=.1,console.log("------------清除缓存后, 开始第二次尝试------------"),e.next=14,d(t);case 14:a=e.sent,n(a),e.next=21;break;case 18:e.prev=18,e.t1=e["catch"](9),i(e.t1);case 21:case"end":return e.stop()}}),e,null,[[0,7],[9,18]])})));return function(t,n){return e.apply(this,arguments)}}())}function d(t){var e=t.type,n=t.formData,i=t.background,l=t.posterCanvasId,f=t.backgroundImage,d=t.reserve,m=t.textArray,p=t.drawArray,v=t.qrCodeArray,y=t.imagesArray,w=t.setCanvasWH,x=t.setCanvasToTempFilePath,k=t.setDraw,A=t.bgScale,S=t.Context,C=t._this,P=t.delayTimeScale,N=t.drawDelayTime;return new Promise(function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(o,T){var L,O,F,R,_,B,I,j,z,D,W,J,G;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,s.default.showLoading("正在准备海报数据"),S||(s.default.log("没有画布对象,创建画布对象"),S=uni.createCanvasContext(l,C||null)),!(i&&i.width&&i.height)){t.next=7;break}L=i,t.next=10;break;case 7:return t.next=9,E({backgroundImage:f,type:e,formData:n});case 9:L=t.sent;case 10:if(A=A||c,L.width=L.width*A,L.height=L.height*A,s.default.log("获取背景图信息对象成功:"+JSON.stringify(L)),O={bgObj:L,type:e,bgScale:A,getBgObj:function(){return O.bgObj},setBgObj:function(t){O.bgObj=t,L=t}},!y){t.next=23;break}return"function"==typeof y&&(y=y(O)),s.default.showLoading("正在生成需绘制图片的临时路径"),s.default.log("准备设置图片"),t.next=21,b(y);case 21:y=t.sent,s.default.hideLoading();case 23:if(m&&("function"==typeof m&&(m=m(O)),m=h(S,m)),!v){t.next=38;break}"function"==typeof v&&(v=v(O)),s.default.showLoading("正在生成需绘制图片的临时路径"),F=0;case 28:if(!(F<v.length)){t.next=37;break}if(s.default.log(F),!v[F].image){t.next=34;break}return t.next=33,s.default.downloadFile_PromiseFc(v[F].image);case 33:v[F].image=t.sent;case 34:F++,t.next=28;break;case 37:s.default.hideLoading();case 38:if(!p){t.next=95;break}if("function"==typeof p&&(p=p(O)),!s.default.isPromise(p)){t.next=44;break}return t.next=43,p;case 43:p=t.sent;case 44:if(!(s.default.isArray(p)&&p.length>0)){t.next=95;break}R=!1,_=0;case 47:if(!(_<p.length)){t.next=75;break}B=p[_],s.default.isFn(B.allInfoCallback)&&!R&&(R=!0),B[u]=_,I=void 0,t.t0=B.type,t.next="image"===t.t0?55:"text"===t.t0?59:"qrcode"===t.t0?61:"custom"===t.t0?67:68;break;case 55:return t.next=57,b(B);case 57:return I=t.sent,t.abrupt("break",70);case 59:return I=h(S,B),t.abrupt("break",70);case 61:if(!B.image){t.next=66;break}return t.next=64,s.default.downloadFile_PromiseFc(B.image);case 64:t.t1=t.sent,I={image:t.t1};case 66:return t.abrupt("break",70);case 67:return t.abrupt("break",70);case 68:return s.default.log("未识别的类型"),t.abrupt("break",70);case 70:I&&s.default.isObject(I)&&(p[_]=(0,a.default)({},B,{},I));case 72:_++,t.next=47;break;case 75:if(!R){t.next=95;break}s.default.log("----------------hasAllInfoCallback----------------"),j=(0,r.default)(p),j.sort((function(t,e){var n=s.default.isUndef(t.serialNum)||s.default.isNull(t.serialNum)?Number.NEGATIVE_INFINITY:Number(t.serialNum),i=s.default.isUndef(e.serialNum)||s.default.isNull(e.serialNum)?Number.NEGATIVE_INFINITY:Number(e.serialNum);return n-i})),s.default.log("开始for循环"),z=0;case 81:if(!(z<j.length)){t.next=94;break}if(D=(0,a.default)({},j[z]),!s.default.isFn(D.allInfoCallback)){t.next=91;break}if(W=D.allInfoCallback({drawArray:p}),!s.default.isPromise(W)){t.next=89;break}return t.next=88,W;case 88:W=t.sent;case 89:J=D[u],s.default.isUndef(J)?console.log("程序错误 找不到idKey!!!\t...这不应该啊"):p[D[u]]=(0,a.default)({},D,{},W);case 91:z++,t.next=81;break;case 94:s.default.log("for循环结束");case 95:if(console.log("params:"+JSON.stringify(O)),!w||"function"!=typeof w){t.next=99;break}return t.next=99,new Promise((function(t,e){w(O),setTimeout((function(){t()}),50)}));case 99:return t.next=101,g({Context:S,type:e,posterCanvasId:l,reserve:d,drawArray:p,textArray:m,imagesArray:y,bgObj:L,qrCodeArray:v,setCanvasToTempFilePath:x,setDraw:k,bgScale:A,_this:C,delayTimeScale:P,drawDelayTime:N});case 101:G=t.sent,s.default.hideLoading(),o({bgObj:L,poster:G,type:e}),t.next=109;break;case 106:t.prev=106,t.t2=t["catch"](0),T(t.t2);case 109:case"end":return t.stop()}}),t,null,[[0,106]])})));return function(e,n){return t.apply(this,arguments)}}())}function g(t){var e=t.Context,n=t.type,i=t.posterCanvasId,r=t.reserve,a=t.bgObj,o=t.drawArray,l=t.textArray,u=t.qrCodeArray,c=t.imagesArray,f=t.setCanvasToTempFilePath,d=t.setDraw,g=t.bgScale,h=(t._this,t.delayTimeScale),m=t.drawDelayTime,p={Context:e,bgObj:a,type:n,bgScale:g};return h=void 0!==h?h:15,m=void 0!==m?m:100,new Promise((function(t,g){try{if(s.default.showLoading("正在绘制海报"),s.default.log("背景对象:"+JSON.stringify(a)),a&&a.path?(s.default.log("背景有图片路径"),e.drawImage(a.path,0,0,a.width,a.height)):(s.default.log("背景没有图片路径"),a.backgroundColor?(s.default.log("背景有背景颜色:"+a.backgroundColor),e.setFillStyle(a.backgroundColor),e.fillRect(0,0,a.width,a.height)):s.default.log("背景没有背景颜色")),s.default.showLoading("绘制图片"),c&&c.length>0&&S(e,c),s.default.showLoading("绘制自定义内容"),d&&"function"==typeof d&&d(p),s.default.showLoading("绘制文本"),l&&l.length>0&&w(e,l,a),s.default.showLoading("绘制二维码"),u&&u.length>0)for(var v=0;v<u.length;v++)L(e,u[v]);if(s.default.showLoading("绘制可控层级序列"),o&&o.length>0)for(var b=0;b<o.length;b++){var y=o[b];switch(s.default.log("绘制可控层级序列, drawArrayItem:"+JSON.stringify(y)),y.type){case"image":s.default.log("绘制可控层级序列, 绘制图片"),S(e,y);break;case"text":s.default.log("绘制可控层级序列, 绘制文本"),w(e,y,a);break;case"qrcode":s.default.log("绘制可控层级序列, 绘制二维码"),L(e,y);break;case"custom":s.default.log("绘制可控层级序列, 绘制自定义内容"),y.setDraw&&"function"===typeof y.setDraw&&y.setDraw(e);break;default:s.default.log("未识别的类型");break}}s.default.showLoading("绘制中"),setTimeout((function(){s.default.log("准备执行draw方法"),s.default.log("Context:"+e);var d=function(){s.default.showLoading("正在输出图片");var e,r=f||{};r&&"function"==typeof r&&(r=f(a,n)),e=function(){s.default.hideLoading(),t({tempFilePath:document.querySelector("uni-canvas[canvas-id=".concat(i,"]>canvas")).toDataURL("image/".concat(r.fileType||"jpg"),r.quality||.8)})};var d=0;u&&u.forEach((function(t){t.text&&(d+=Number(t.text.length))})),c&&c.forEach((function(){d+=h})),l&&l.forEach((function(){d+=h})),o&&o.forEach((function(t){switch(t.type){case"text":t.text&&(d+=t.text.length);break;default:d+=h;break}})),s.default.log("延时系数:"+h),s.default.log("总计延时:"+d),setTimeout(e,d)};e.draw("boolean"==typeof r&&r,d)}),m)}catch(x){s.default.hideLoading(),g(x)}}))}function h(t,e){if(s.default.log("进入设置文字方法, texts:"+JSON.stringify(e)),e&&s.default.isArray(e)){if(s.default.log("texts是数组"),e.length>0)for(var n=0;n<e.length;n++)s.default.log("字符串信息-初始化之前:"+JSON.stringify(e[n])),e[n]=m(t,e[n])}else s.default.log("texts是对象"),e=m(t,e);return s.default.log("返回texts:"+JSON.stringify(e)),e}function m(t,e){if(s.default.log("进入设置文字方法, textItem:"+JSON.stringify(e)),s.default.isNotNull_string(e.text)){e.text=String(e.text),e.alpha=void 0!==e.alpha?Number(e.alpha):1,e.color=e.color||"black",e.size=void 0!==e.size?Number(e.size):10,e.textAlign=e.textAlign||"left",e.textBaseline=e.textBaseline||"middle",e.dx=Number(e.dx)||0,e.dy=Number(e.dy)||0,e.size=Math.ceil(Number(e.size)),s.default.log("字符串信息-初始化默认值后:"+JSON.stringify(e));var n=p(t,{text:e.text,size:e.size});s.default.log("字符串信息-初始化时的文本长度:"+n);var i={};e.infoCallBack&&"function"===typeof e.infoCallBack&&(i=e.infoCallBack(n)),e=(0,a.default)({},e,{textLength:n},i),s.default.log("字符串信息-infoCallBack后:"+JSON.stringify(e))}return e}function p(t,e){s.default.log("计算文字长度, obj:"+JSON.stringify(e));var n,i=e.text,r=e.size;t.setFontSize(r);try{n=t.measureText(i)}catch(c){n={}}if(n={},s.default.log("measureText计算文字长度, textLength:"+JSON.stringify(n)),n=n&&n.width?n.width:0,!n){for(var a=0,o=0;o<i.length;o++){var l=i.substr(o,1),u=v(l);s.default.log("计算文字宽度系数:"+u),a+=u}s.default.log("文字宽度总系数:"+a),n=a*r}return n}function v(t){var e;return e=/a/.test(t)?.552734375:/b/.test(t)?.638671875:/c/.test(t)?.50146484375:/d/.test(t)?.6396484375:/e/.test(t)?.5673828125:/f/.test(t)?.3466796875:/g/.test(t)?.6396484375:/h/.test(t)?.61572265625:/i/.test(t)?.26611328125:/j/.test(t)?.26708984375:/k/.test(t)?.54443359375:/l/.test(t)?.26611328125:/m/.test(t)?.93701171875:/n/.test(t)?.6162109375:/o/.test(t)?.6357421875:/p/.test(t)?.638671875:/q/.test(t)?.6396484375:/r/.test(t)?.3818359375:/s/.test(t)?.462890625:/t/.test(t)?.37255859375:/u/.test(t)?.6162109375:/v/.test(t)?.52490234375:/w/.test(t)?.78955078125:/x/.test(t)?.5068359375:/y/.test(t)?.529296875:/z/.test(t)?.49169921875:/A/.test(t)?.70361328125:/B/.test(t)?.62744140625:/C/.test(t)?.6689453125:/D/.test(t)?.76171875:/E/.test(t)?.5498046875:/F/.test(t)?.53125:/G/.test(t)?.74365234375:/H/.test(t)?.7734375:/I/.test(t)?.2939453125:/J/.test(t)?.39599609375:/K/.test(t)?.634765625:/L/.test(t)?.51318359375:/M/.test(t)?.97705078125:/N/.test(t)?.81298828125:/O/.test(t)?.81494140625:/P/.test(t)?.61181640625:/Q/.test(t)?.81494140625:/R/.test(t)?.65283203125:/S/.test(t)?.5771484375:/T/.test(t)?.5732421875:/U/.test(t)?.74658203125:/V/.test(t)?.67626953125:/W/.test(t)?1.017578125:/X/.test(t)?.64501953125:/Y/.test(t)?.603515625:/Z/.test(t)?.6201171875:/[0-9]/.test(t)?.58642578125:/[\u4e00-\u9fa5]/.test(t)?1:/ /.test(t)?.2958984375:/\`/.test(t)?.294921875:/\~/.test(t)?.74169921875:/\!/.test(t)?.3125:/\@/.test(t)?1.03125:/\#/.test(t)?.63818359375:/\$/.test(t)?.58642578125:/\%/.test(t)?.8896484375:/\^/.test(t)?.74169921875:/\&/.test(t)?.8701171875:/\*/.test(t)?.455078125:/\(/.test(t)?.333984375:/\)/.test(t)?.333984375:/\_/.test(t)?.4482421875:/\-/.test(t)?.4326171875:/\+/.test(t)?.74169921875:/\=/.test(t)?.74169921875:/\|/.test(t)?.26904296875:/\\/.test(t)?.416015625:/\[/.test(t)?.333984375:/\]/.test(t)?.333984375:/\;/.test(t)?.24072265625:/\'/.test(t)?.25634765625:/\,/.test(t)?.24072265625:/\./.test(t)?.24072265625:/\//.test(t)?.42724609375:/\{/.test(t)?.333984375:/\}/.test(t)?.333984375:/\:/.test(t)?.24072265625:/\"/.test(t)?.435546875:/\</.test(t)?.74169921875:/\>/.test(t)?.74169921875:/\?/.test(t)?.48291015625:1,e}function b(t){return s.default.log("进入设置图片数据方法"),new Promise(function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(n,i){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t||!s.default.isArray(t)){e.next=14;break}s.default.log("images是一个数组"),r=0;case 4:if(!(r<t.length)){e.next=12;break}return s.default.log("设置图片数据循环中:"+r),e.next=8,y(t[r]);case 8:t[r]=e.sent;case 9:r++,e.next=4;break;case 12:e.next=18;break;case 14:return s.default.log("images是一个对象"),e.next=17,y(t);case 17:t=e.sent;case 18:n(t),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](0),i(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,n){return e.apply(this,arguments)}}())}function y(t){return new Promise(function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(n,i){var r,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.url){e.next=17;break}return r=t.url,e.next=4,s.default.downloadFile_PromiseFc(r);case 4:return r=e.sent,t.url=r,o=t.infoCallBack&&"function"===typeof t.infoCallBack,l={},e.next=10,s.default.getImageInfo_PromiseFc(r);case 10:l=e.sent,o&&(t=(0,a.default)({},t,{},t.infoCallBack(l))),t.dx=Number(t.dx)||0,t.dy=Number(t.dy)||0,t.dWidth=Number(t.dWidth||l.width),t.dHeight=Number(t.dHeight||l.height),t=(0,a.default)({},t,{imageInfo:l});case 17:n(t);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}function w(t,e,n){s.default.isArray(e)?s.default.log("遍历文本方法, 是数组"):(s.default.log("遍历文本方法, 不是数组"),e=[e]),s.default.log("遍历文本方法, textArray:"+JSON.stringify(e));var i=[];if(e&&e.length>0)for(var r=0;r<e.length;r++){var o=e[r];if(o.text&&o.lineFeed){var l=-1,u=n.width,c=o.size,f=o.dx;if(s.default.isObject(o.lineFeed)){var d=o.lineFeed;l=void 0!==d.lineNum&&"number"===typeof d.lineNum&&d.lineNum>=0?d.lineNum:l,u=void 0!==d.maxWidth&&"number"===typeof d.maxWidth?d.maxWidth:u,c=void 0!==d.lineHeight&&"number"===typeof d.lineHeight?d.lineHeight:c,f=void 0!==d.dx&&"number"===typeof d.dx?d.dx:f}for(var g=o.text.split(""),h="",m=[],v=0,b=g.length;v<b;v++)p(t,{text:h,size:o.size})<=u&&p(t,{text:h+g[v],size:o.size})<=u?(h+=g[v],v==g.length-1&&m.push(h)):(m.push(h),h=g[v]);s.default.log("循环出的文本数组:"+JSON.stringify(m));for(var y=l>=0&&l<m.length?l:m.length,w=0;w<y;w++){var x=m[w];w==y-1&&y<m.length&&(x=x.substring(0,x.length-1)+"...");var A=(0,a.default)({},o,{text:x,dx:0===w?o.dx:f>=0?f:o.dx,dy:o.dy+w*c,textLength:p(t,{text:x,size:o.size})});s.default.log("重新组成的文本对象:"+JSON.stringify(A)),i.push(A)}}else i.push(o)}s.default.log("绘制文本新数组:"+JSON.stringify(i)),k(t,i)}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.font&&"string"===typeof t.font)return s.default.log(t.font),t.font;var e="normal",n="normal",i="normal",r=t.size||10,a="sans-serif";return r=Math.ceil(Number(r)),t.fontStyle&&"string"===typeof t.fontStyle&&(e=t.fontStyle.trim()),t.fontVariant&&"string"===typeof t.fontVariant&&(n=t.fontVariant.trim()),!t.fontWeight||"string"!==typeof t.fontWeight&&"number"!==typeof t.fontWeight||(i=t.fontWeight.trim()),t.fontFamily&&"string"===typeof t.fontFamily&&(a=t.fontFamily.trim()),e+" "+n+" "+i+" "+r+"px "+a}function k(t,e){if(s.default.log("准备绘制文本方法, texts:"+JSON.stringify(e)),e&&s.default.isArray(e)){if(s.default.log("准备绘制文本方法, 是数组"),e.length>0)for(var n=0;n<e.length;n++)A(t,e[n])}else s.default.log("准备绘制文本方法, 不是数组"),A(t,e)}function A(t,e){if(s.default.log("进入绘制文本方法, textItem:"+JSON.stringify(e)),e&&s.default.isObject(e)&&e.text){if(t.font=x(e),t.setFillStyle(e.color),t.setGlobalAlpha(e.alpha),t.setTextAlign(e.textAlign),t.setTextBaseline(e.textBaseline),t.fillText(e.text,e.dx,e.dy),e.lineThrough&&s.default.isObject(e.lineThrough)){s.default.log("有删除线");var n,i,r=e.lineThrough;switch(r.alpha=void 0!==r.alpha?r.alpha:e.alpha,r.style=r.style||e.color,r.width=void 0!==r.width?r.width:e.size/10,r.cap=void 0!==r.cap?r.cap:"butt",s.default.log("删除线对象:"+JSON.stringify(r)),t.setGlobalAlpha(r.alpha),t.setStrokeStyle(r.style),t.setLineWidth(r.width),t.setLineCap(r.cap),e.textAlign){case"left":n=e.dx;break;case"center":n=e.dx-e.textLength/2;break;default:n=e.dx-e.textLength;break}switch(e.textBaseline){case"top":i=e.dy+.5*e.size;break;case"middle":i=e.dy;break;default:i=e.dy-.5*e.size;break}t.beginPath(),t.moveTo(n,i),t.lineTo(n+e.textLength,i),t.stroke(),t.closePath(),s.default.log("删除线完毕")}t.setGlobalAlpha(1),t.font="10px sans-serif"}}function S(t,e){if(s.default.log("判断图片数据类型:"+JSON.stringify(e)),e&&s.default.isArray(e)){if(e.length>0)for(var n=0;n<e.length;n++)C(t,e[n])}else C(t,e)}function C(t,e){s.default.log("判断绘制图片形状, img:"+JSON.stringify(e)),e.url&&(e.circleSet?N(t,e):e.roundRectSet?T(t,e):P(t,e))}function P(t,e){if(s.default.log("进入绘制默认图片方法, img:"+JSON.stringify(e)),e.url){var n=!s.default.isUndef(e.alpha);e.alpha=Number(s.default.isUndef(e.alpha)?1:e.alpha),t.setGlobalAlpha(e.alpha),s.default.log("绘制默认图片方法, 有url"),e.dWidth&&e.dHeight&&e.sx&&e.sy&&e.sWidth&&e.sHeight?(s.default.log("绘制默认图片方法, 绘制第一种方案"),t.drawImage(e.url,Number(e.dx||0),Number(e.dy||0),Number(e.dWidth)||!1,Number(e.dHeight)||!1,Number(e.sx)||!1,Number(e.sy)||!1,Number(e.sWidth)||!1,Number(e.sHeight)||!1)):e.dWidth&&e.dHeight?(s.default.log("绘制默认图片方法, 绘制第二种方案"),t.drawImage(e.url,Number(e.dx||0),Number(e.dy||0),Number(e.dWidth)||!1,Number(e.dHeight)||!1)):(s.default.log("绘制默认图片方法, 绘制第三种方案"),t.drawImage(e.url,Number(e.dx||0),Number(e.dy||0))),n&&t.setGlobalAlpha(1)}s.default.log("绘制默认图片方法, 绘制完毕")}function N(t,e){s.default.log("进入绘制圆形图片方法, obj:"+JSON.stringify(e));var n,i,r,a,o=e.dx,l=e.dy,u=e.dWidth,c=e.dHeight,f=e.circleSet;e.imageInfo;("object"===typeof f&&(n=f.x,i=f.y,r=f.r),r)||(a=u>c?c:u,r=a/2);n=n?o+n:(o||0)+r,i=i?l+i:(l||0)+r,t.save(),t.beginPath(),t.arc(n,i,r,0,2*Math.PI,!1),t.closePath(),t.setGlobalAlpha(0),t.fillStyle="#FFFFFF",t.fill(),t.setGlobalAlpha(1),t.clip(),P(t,e),s.default.log("默认图片绘制完毕"),t.restore()}function T(t,e){s.default.log("进入绘制矩形图片方法, obj:"+JSON.stringify(e)),t.save();var n,i=e.dx,r=e.dy,a=e.dWidth,o=e.dHeight,l=e.roundRectSet;e.imageInfo;"object"===typeof l&&(n=l.r),n=n||.1*a,a<2*n&&(n=a/2),o<2*n&&(n=o/2),t.beginPath(),t.moveTo(i+n,r),t.arcTo(i+a,r,i+a,r+o,n),t.arcTo(i+a,r+o,i,r+o,n),t.arcTo(i,r+o,i,r,n),t.arcTo(i,r,i+a,r,n),t.closePath(),t.setGlobalAlpha(0),t.fillStyle="#FFFFFF",t.fill(),t.setGlobalAlpha(1),t.clip(),P(t,e),t.restore(),s.default.log("进入绘制矩形图片方法, 绘制完毕")}function L(t,e){s.default.log("进入绘制二维码方法"),s.default.showLoading("正在生成二维码");for(var n=[],i={text:String(e.text||"")||"",size:Number(e.size||0)||200,background:String(e.background||"")||"#ffffff",foreground:String(e.foreground||"")||"#000000",pdground:String(e.pdground||"")||"#000000",correctLevel:Number(e.correctLevel||0)||3,image:String(e.image||"")||"",imageSize:Number(e.imageSize||0)||40,dx:Number(e.dx||0)||0,dy:Number(e.dy||0)||0},r=null,a=0,o=0,u=n.length;o<u;o++)if(a=o,n[o].text==i.text&&n[o].text.correctLevel==i.correctLevel){r=n[o].obj;break}a==u&&(r=new l.default(i.text,i.correctLevel),n.push({text:i.text,correctLevel:i.correctLevel,obj:r}));for(var c=function(t){var e=t.options;return e.pdground&&(t.row>1&&t.row<5&&t.col>1&&t.col<5||t.row>t.count-6&&t.row<t.count-2&&t.col>1&&t.col<5||t.row>1&&t.row<5&&t.col>t.count-6&&t.col<t.count-2)?e.pdground:e.foreground},f=r.getModuleCount(),d=i.size,g=i.imageSize,h=(d/f).toPrecision(4),m=(d/f).toPrecision(4),p=0;p<f;p++)for(var v=0;v<f;v++){var b=Math.ceil((v+1)*h)-Math.floor(v*h),y=Math.ceil((p+1)*h)-Math.floor(p*h),w=c({row:p,col:v,count:f,options:i});t.setFillStyle(r.modules[p][v]?w:i.background),t.fillRect(i.dx+Math.round(v*h),i.dy+Math.round(p*m),b,y)}if(i.image){var x=function(t,e,n,r,a,o,s,l,u){t.setLineWidth(s),t.setFillStyle(i.background),t.setStrokeStyle(i.background),t.beginPath(),t.moveTo(e+o,n),t.arcTo(e+r,n,e+r,n+o,o),t.arcTo(e+r,n+a,e+r-o,n+a,o),t.arcTo(e,n+a,e,n+a-o,o),t.arcTo(e,n,e+o,n,o),t.closePath(),l&&t.fill(),u&&t.stroke()},k=i.dx+Number(((d-g)/2).toFixed(2)),A=i.dy+Number(((d-g)/2).toFixed(2));x(t,k,A,g,g,2,6,!0,!0),t.drawImage(i.image,k,A,g,g)}s.default.log("进入绘制二维码方法完毕"),s.default.hideLoading()}function E(t){t.backgroundImage,t.type;return new Promise(function(){var e=(0,o.default)(regeneratorRuntime.mark((function e(n,i){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s.default.showLoading("正在获取海报背景图"),e.next=4,O(t);case 4:r=e.sent,s.default.hideLoading(),n(r),e.next=15;break;case 9:e.prev=9,e.t0=e["catch"](0),s.default.hideLoading(),s.default.showToast("获取分享用户背景图失败:"+JSON.stringify(e.t0)),s.default.log(JSON.stringify(e.t0)),i(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}())}function O(t,e){t.backgroundImage,t.type;return s.default.log("获取分享背景图, 尝试清空本地数据"),new Promise(function(){var n=(0,o.default)(regeneratorRuntime.mark((function n(i,r){var o,l,u,c,f,d,g,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,s.default.showLoading("正在下载海报背景图"),!e){n.next=23;break}return s.default.log("有从后端获取的背景图片路径"),s.default.log("尝试下载并保存背景图"),o=s.default.fileNameInPath(e),n.next=8,s.default.downLoadAndSaveFile_PromiseFc(e);case 8:if(l=n.sent,!l){n.next=19;break}return s.default.log("下载并保存背景图成功:"+l),n.next=13,s.default.getImageInfo_PromiseFc(l);case 13:u=n.sent,c={path:l,width:u.width,height:u.height,name:o},s.default.hideLoading(),i(c),n.next=21;break;case 19:s.default.hideLoading(),r("not find savedFilePath");case 21:n.next=46;break;case 23:return s.default.log("没有从后端获取的背景图片路径, 尝试从后端获取背景图片路径"),n.next=26,s.default.getPosterUrl(t);case 26:return f=n.sent,s.default.log("尝试下载并保存背景图:"+f),n.next=30,s.default.downLoadAndSaveFile_PromiseFc(f);case 30:if(d=n.sent,!d){n.next=44;break}return s.default.log("下载并保存背景图成功:"+d),n.next=35,s.default.getImageInfo_PromiseFc(d);case 35:g=n.sent,s.default.log("获取图片信息成功"),h={path:d,width:g.width,height:g.height,name:s.default.fileNameInPath(f)},s.default.log("拼接背景图信息对象成功:"+JSON.stringify(h)),s.default.hideLoading(),s.default.log("返回背景图信息对象"),i((0,a.default)({},h)),n.next=46;break;case 44:s.default.hideLoading(),r("not find savedFilePath");case 46:n.next=51;break;case 48:n.prev=48,n.t0=n["catch"](0),r(n.t0);case 51:case"end":return n.stop()}}),n,null,[[0,48]])})));return function(t,e){return n.apply(this,arguments)}}())}t.exports={getSharePoster:f,setText:h,setImage:b,drawText:w,drawImage:S,drawQrCode:L}},"514c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAAA8CAYAAACD6F86AAAMJUlEQVR4Xu2cB5AlVRWG/zM7igEVw7oYSl0Rw7K6KIZCQVGiICawEEGJKooBEBVLEBRdkFUUEAVLgqCglAQDiqkkKCpiHhwEwTWgOK5gAh0c5ljf29NTPW+6+3X363lvZ987VVNbM9t9+/b970n/ObdNQ1lQK2ALarbDyaoxwNz9gZJeKOmhJdZ1VNJjJN0i6T8lrm+/5B+Svi/pBjObrnH/vN3i7rz/MZJeK+nbkvYys7819cA5gLn7IkmbSXqwpKskbSBpO0njZnZD3oPd/c2SPizpHk1NrmCcuyV9U9KeZvb3Hjyv9CPcfVdJH5P0KElTknYws++UHqDDhVmAPVfSCQHYpZKWSNpa0o2SdjWzf2eN6e6nx65qTGs7zP13krY0sz83tRhF48RG3lPSPrFZTjKzyfZ73H13SadI2jj+b3czu7CpObYv7qi7HyHpfVLLXGJu+Jcfl/QsM/tRDmA7SPpgaqJ5c7ynpI0kjcSY/6xhFjGjl0g6yszuaGoxOgD2AkmfkrRUEhr+MjP7cr8BG3F3bO9JYQrT82GRNjOz3+YABhDPlvTwDgv4FEmYz/vEi58p6fKKi46WX2tmf6p4X+3L3X1fSR+JzcY4rzazz/QbMLn7JpIwb+yoRAOxxUzudWb2v9pvjUq57yTp/Hhxxj3IzM7oZsz5vtfdWYejJB2dsgybZG3eXpvE1ru7+6YB2nMkYadPk/TRJnb0AgXsIRFI7BGb46+SAOxffdewZALu/kRJu0gihL7QzG5vYievC4C5O2nFFuGjfyqJ37EoPzczUo1Z4u74rbMlEZAhmPCdzWxOStIXDUuBRog+bWY42UZkHQHsFREgkbJ8HW2R9GRJ+OcdzWxN+mXdffMIch4df8c9vFdSlnvYOf5vcVz7BklfK7F4rPGtZoabyJVeheAzE+g3YKFd75f0zoxVuUvSVulIOPwXAH++xKJ3cwkWjCS7ENxGAIuXKjvWjpLOSwUd7EAixTriZka6UVpirodJWimJyDYtmLjN0wSBu3PNOZIS/1X6WRUv5D1ONrND5lXD3P2+kp4aCXaZOWJeDpXEfZiBTwaFU+be9mvQiO9Jur0KcBFU4ZO2TEXCjMVcDksiYXe/N0xFRMgb1plghXv+i9ab2cnzDdhxkt7WI0qq/V3YlZgQ0o05wULRi7s7Povo95nhi0hlVpoZESCRMv6bMP7A1GaESLhS0g8KxiZYg8pLAL5Y0q9LAPdHSWeYGcDlSlkzljuAu18v6QklJjRflxAovNTMflHlAWEaHx+ENfTWZWZGRNwSd7+/pD9I4t/WnyT9RdL2ZjaW96y+RollFsDd8QWwI4TGZQSfgKlJ6K47c6KtMmOx4yFWDzEzdmhliSCESHgW6+/uaMjPIoJk1xP+866XFpnfhQAYvCCBBCCUkRehEZKoChDCwj/+psyNGddw/zXc33SZxd3hOgk0tglN+5ykmzr5yr4BFjYcEDAFdzSxIO4OuCdKgpdDw4jKNq3qf2qCW/m2YOhZg7vMjKCko/QTsHdI4gc2fR8zozZWW8JnoF0QyzAHyNWSnl92MWo/vIc39hMwoi6YdzTsNDN7Yzfv7e4PiOQT84lgzt4SY1fKpbqZx3zf20/AyLwxYcjZZrZf3ZcNsAj/08EJJX5KFDfVHbeb+0Ljt5W0d1iRVWZGVNiVLGjAwgdAmB4uicWBu0OoZ70ejWuSp6yy0pHwk1ORyJPAH2dm5F0z4u70nVC5IEAqK1tJgr15UNzwAUnfLXkz7Q7XZVUBkvtz8zB370rD3J2SBCV1Jv+ktgmfRRGzV9XirMUKrScVSBJcykcwMC1xdzYXzMfzKgJGkIJlSkCmAadsoxHXHi/pgrwgr3HA3P1esWuJBtm9SbiPn2ITfEHSkQmjEIvDy8EL9qwDKgC7VRLzRdoBw+dOZPCNJZWl9mWfxfrkbeZGAQsTsr+kg1MmIZn5eOyeixOVd3c6s54hCTqHUgULBOuAX5uYT3NZAjA2Gm1qUFdVTGJtpCRhEjHLp+a9eyOABVtAP8eRlCfakmiAQKvg7a5KEk93f2SU3V+catyhoSYBbLWkn0RifGPT5rMEYKwNFmL7jM2HX2PesDtEu1/J4AsxiwAAJ0nemfi0X8ZGaO+4wgLBrFxuZlBgmVIEGA0uD4uw/nQzwxfNkoi0CP0pV7wmWuPSfSCMQe3pnHRLWDh8yNZXFuxeXgCw+SFIgRr6alBRELT4hTs7FfzyXrwTYClfBuPBT1oAC9OFOYW2ovXtorZrEuqNqsQPU3wrpRrWa4a3nAkoOhQvua4IMEzbq2A5qKCaGbt9Rtz9frHLYOopr6QFX/Vp+kLMDHK4HWi08VsV6Kz0/fg5qCx+2JHnZj2jk10qC1jWOO4OtUYjUQLY3nm9h8FJXpsCjLLOoXUbYIsAw4bDSEDJzOLQ4mXfHYCiYck4LCYA0Q52kZndlvPC7DC6hBE0iR14bhCt+LOnhQlhZ+M/8uaJ9lE/YkPNaYgpAm29A6zDy54aSXDSlg1QmCm06hOSfl8U8bk7jpX+c4TQmprTNwIcxiSkJgcipCYowWfQgUyQgolJA0hPxv5VO7oGDTAWiUosgtMlAQWs88r4lDbACC5gPHKTS3enoWWFpGWSHidpuSSCFoD7kKSzqvKRgwbYXkHiUttC29CqW8qG4VUBa/OdaB8nRMiTkJvNjJpaJRk0wNjZhKk4XVqzKrXBdQNYJVQKLh4owLpdtDzAgg7C7KFB17Q3r4ZpfHok2DR9FvbwDYOODkhFlZbmlpcE4Xl1VlNJFmDR/QT3yOkZzB1h8zHJ/UF5HRtVYDi3o83sS3U3z1DD1hKmhOQsNKCRix1oZl9sX9QcwDjGRADxpriew4Nbmxl0FWMTJVLwfGykAhyae3vWGa0yIA4BW7uo0FIkxEkZZT8zI1GcJTmAkVwCGDwkQvTIgT0IWsbmgBw1NMJ9hGDn8E5tYXngrXeABZHL4sFrQUZ2LBG4O3lT+qzXELC13Vc9YTpoH6NjCMcOkwAnWChDwOYuTy+pqcoFzCFgCxMwNDOhjqqYRIIODsNznJb7s4IO2BCYDvhHuq+OGAYdsUnqtAi4O4fkqA0RIEAaAxgnVcoEHUSApAPviqScMsTxCeUUBxPeI4lT+vhVeiVor67VcbU+Bh11TCIfVyGP4uQmhTryqDkHAQoSZw6qwxPiqH+VRIgJ2hEp0h/C3K6vGyFG1Emul9siUOSsuyyvsKFpAah1oL6RinP65aJjGI5xKs9cDRg1RYpDsXO3WCfqi7QMUn6qROlxf+OAdYokY3enyysd2foyY1a9pocmkTU+IGqESYcW2rUqwn16IROzTup0WxGQQ8ByuqaaMomxQTkbTaLP+eekdQBN4yx1+tNLAAbRcGYeTzrIgHHuC+3G7yJ85ebgMnW1Kj4sAGOd6b6iZkgxtr1HZMZNR9PRLnkfFBtkwDBPRKbwnggVbw59tKiwDhpGDwsUHCUmNGVbM6PNIVeiYYlPSxwkiY/L5B3BvYzmpPThwvSggwwYtbwL+OBZLAhA8f2oouOwrUsjsKInn9M4V0Sz0ZwPhbWjF9UMSkdsElrXySn5PTGT9G6SBtEOmNlUO8iAYZbeSk99kNU4fso1B5T5vmEsPg1Cd9fpWI5zB6x/2jwCEuPl5pYDC1hoCh8qo72BtjuEMPvjnApdVw8ZzjtgYbtpmUt2EnUtvh9IUw3CoXL6+vAnPZXY5YTctNwlPoXWuZsjDOcLBXMaPns6ybWnX2cq670AjI9jcpg7aZqhhfkRKQA5o/zyfu3oqGRDeWEeYVpayhfahsbVor4aApWu4lWrV68+cenSpa3PQfQCML7LRJdVlrAggEn5pnLW39CiEEQQ7fFRT1qu5/sDKlWnfd2aNWt2W7x4cYviKwLsx9GCjTrOOexW9qnuThWZz/GkT4Cwa+mX5xO18Gqco+6ruDvaRdTHN6hoQ+D39k8b9XqOrNOVExMTeyxZsqR1QCIXsPHxcRzxvvT8TU5OrlyxYkWrt6KqjI2NbTw6OgohnHyghCHQpiumpqYuWb58eeY3hKs+p6nrx8bGNly0aNE2IyMjW7h78vW2poavOs7k9PT0+cuWLaNRtyW5gFUdeXh9b1ZgCFhv1rmxpwwBa2wpezPQ/wHMMmeXOf8bcQAAAABJRU5ErkJggg=="},"542d":function(t,e,n){"use strict";var i=n("23e7"),r=n("d039"),a=n("408a"),o=1..toPrecision,s=r((function(){return"1"!==o.call(1,void 0)}))||!r((function(){o.call({})}));i({target:"Number",proto:!0,forced:s},{toPrecision:function(t){return void 0===t?o.call(a(this)):o.call(a(this),t)}})},"58a85":function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"header",style:"background-image: linear-gradient(135deg,"+t.bgColor+" 0% , "+t.bg_color_shade+" 100%)"},[i("v-uni-image",{staticClass:"logo",attrs:{src:n("514c"),mode:""}}),i("v-uni-view",{staticClass:"input_box"},[i("v-uni-image",{attrs:{src:n("dc9d"),mode:""}}),i("v-uni-input",{staticClass:"search",attrs:{type:"text",value:"",placeholder:"搜索海蓝之谜浓缩密集修护眼霜","placeholder-class":"cl"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}}})],1)],1),i("v-uni-swiper",{staticClass:"swiper",attrs:{circular:!0,autoplay:!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.swiperChange.apply(void 0,arguments)}}},t._l(t.banner_list,(function(e,n){return i("v-uni-swiper-item",{key:n,staticClass:"carousel-item"},[i("v-uni-image",{attrs:{src:e.images_url},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.navTo(e.name)}}})],1)})),1),i("v-uni-view",{staticClass:"nav_box"},t._l(t.navigation,(function(e,n){return i("v-uni-view",{key:n,on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.navToDetailList(e.id,e.items)}}},[i("v-uni-image",{attrs:{src:e.icon,mode:""}})],1)})),1),i("v-uni-view",{staticClass:"recommend_box"},[i("v-uni-view",{staticClass:"recommend_title"},[t._v("热卖商品推荐")]),t._l(t.recommendList,(function(e,r){return i("v-uni-view",{key:r},t._l(e.goods,(function(e,r){return i("v-uni-view",{key:r,staticClass:"recommend",on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.navToDetailPage(e.id)}}},[i("v-uni-image",{staticClass:"recommend_img",attrs:{src:e.home_recommended_images}}),i("v-uni-view",{staticClass:"recommend_txt"},[i("v-uni-text",{staticClass:"title"},[t._v(t._s(e.title))]),i("v-uni-text",{staticClass:"price"},[i("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),t._v(t._s(e.min_price)),void 0!=t.user_type&&0!=t.user_type?i("v-uni-text",{staticClass:"earn"},[i("v-uni-text",{staticClass:"earn_icon numgang"},[t._v("/")]),t._v("赚"),i("v-uni-text",[t._v(t._s(e.profit))])],1):t._e()],1),i("v-uni-image",{attrs:{src:n("97e2")},on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.geterweima(e.id,e)}}})],1)],1)})),1)})),i("v-uni-view",{staticClass:"noMore"},[t._v("-- 让选择变得简单 --")])],2),i("v-uni-view",{staticClass:"flex_row_c_c modalView",class:t.qrShow?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideQr()}}},[i("v-uni-view",{staticClass:"flex_column"},[i("v-uni-image",{staticClass:"posterImage",attrs:{src:t.poster.finalPath||"",mode:"widthFix"}})],1)],1),i("v-uni-view",{staticClass:"hideCanvasView"},[i("v-uni-canvas",{staticClass:"hideCanvas",style:{width:(t.poster.width||10)+"rpx",height:(t.poster.height||10)+"rpx"},attrs:{"canvas-id":"default_PosterCanvasId"}})],1)],1)},a=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}))},"603d":function(t,e,n){"use strict";n.r(e);var i=n("3600"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},8330:function(t,e,n){n("c740"),n("d3b7"),n("ac1f"),n("25f0"),n("1276");var i=console.log;i=function(){};var r={log:function(t){i(t)},showLoading:function(t,e){uni.showLoading({title:t,mask:e||!1})},hideLoading:function(){uni.hideLoading()},showToast:function(t,e){uni.showToast({title:t,icon:e||"none"})},getPosterUrl:function(t){var e=t.backgroundImage;t.type,t.formData;return new Promise((function(t,n){var i;e&&(i=e),i?t(i):n("背景图片路径不存在")}))},shareTypeListSheetArray:{array:[0,1,2,3,4,5]},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isPromise:function(t){return!!t&&("object"===typeof t||"function"===typeof t)&&"function"===typeof t.then},isNull:function(t){return null===t},isUndefined:function(t){return void 0===t},isUndef:function(t){return void 0===t},isNotNull_string:function(t){return null!==t&&void 0!==t&&""!==t},isFn:function(t){return t&&"function"===typeof t},getStorage:function(t,e,n){uni.getStorage({key:t,success:function(t){t.data&&""!=t.data?e&&e(t.data):n&&n()},fail:function(){n&&n()}})},setStorage:function(t,e){i("设置缓存"),i("key："+t),i("data："+JSON.stringify(e)),uni.setStorage({key:t,data:e})},setStorageSync:function(t,e){uni.setStorageSync(t,e)},getStorageSync:function(t){return uni.getStorageSync(t)},clearStorageSync:function(){uni.clearStorageSync()},removeStorageSync:function(t){uni.removeStorageSync(t)},getImageInfo:function(t,e,n){t=a(t),uni.getImageInfo({src:t,success:function(t){e&&"function"==typeof e&&e(t)},fail:function(t){n&&"function"==typeof n&&n(t)}})},downloadFile:function(t,e){t=a(t),uni.downloadFile({url:t,success:function(t){e&&"function"==typeof e&&e(t)}})},downloadFile_PromiseFc:function(t){return new Promise((function(e,n){"http"!==t.substring(0,4)?e(t):(t=a(t),i("url:"+t),uni.downloadFile({url:t,success:function(t){t&&t.tempFilePath?e(t.tempFilePath):n("not find tempFilePath")},fail:function(t){n(t)}}))}))},saveFile:function(t){uni.saveFile({tempFilePath:t,success:function(t){i("保存成功:"+JSON.stringify(t))}})},downLoadAndSaveFile_PromiseFc:function(t){return new Promise((function(e,n){i("准备下载并保存图片:"+t),"http"===t.substring(0,4)?(t=a(t),uni.downloadFile({url:t,success:function(t){i("下载背景图成功："+JSON.stringify(t)),t&&t.tempFilePath?e(t.tempFilePath):n("not find tempFilePath")},fail:function(t){n(t)}})):e(t)}))},checkFile_PromiseFc:function(t){return new Promise((function(e,n){uni.getSavedFileList({success:function(n){var i=n.fileList,r=i.findIndex((function(e){return e.filePath===t}));e(r)},fail:function(t){n(t)}})}))},removeSavedFile:function(t){uni.getSavedFileList({success:function(e){var n=e.fileList,i=n.findIndex((function(e){return e.filePath===t}));i>=0&&uni.removeSavedFile({filePath:t})}})},fileNameInPath:function(t){var e=t.split("/");return e[e.length-1]},getImageInfo_PromiseFc:function(t){return new Promise((function(e,n){i("准备获取图片信息:"+t),t=a(t),uni.getImageInfo({src:t,success:function(t){i("获取图片信息成功:"+JSON.stringify(t)),e(t)},fail:function(t){i("获取图片信息失败:"+JSON.stringify(t)),n(t)}})}))},previewImage:function(t){"string"==typeof t&&(t=[t]),uni.previewImage({urls:t})},actionSheet:function(t,e){for(var n=[],i=0;i<t.array.length;i++)switch(t.array[i]){case"sinaweibo":n[i]="新浪微博";break;case"qq":n[i]="QQ";break;case"weixin":n[i]="微信";break;case"WXSceneSession":n[i]="微信好友";break;case"WXSenceTimeline":n[i]="微信朋友圈";break;case"WXSceneFavorite":n[i]="微信收藏";break;case 0:n[i]="图文链接";break;case 1:n[i]="纯文字";break;case 2:n[i]="纯图片";break;case 3:n[i]="音乐";break;case 4:n[i]="视频";break;case 5:n[i]="小程序";break;default:break}this.showActionSheet(n,e)},showActionSheet:function(t,e){uni.showActionSheet({itemList:t,success:function(t){e&&"function"==typeof e&&e(t.tapIndex)}})},getProvider:function(t,e,n){var i=this;uni.getProvider({service:t,success:function(r){if(n){var a={};a.array=r.provider,i.actionSheet(a,(function(t){e&&"function"==typeof e&&e(r.provider[t])}))}else if("payment"==t){for(var o=r.provider,s=[],l=0;l<o.length;l++)"wxpay"==o[l]?s[l]={name:"微信支付",value:o[l],img:"/static/image/wei.png"}:"alipay"==o[l]&&(s[l]={name:"支付宝支付",value:o[l],img:"/static/image/ali.png"});e&&"function"==typeof e&&e(s)}else e&&"function"==typeof e&&e(r)}})}};function a(t){return t}t.exports=r},"8d42":function(t,e,n){var i=n("9aab");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=n("4f06").default;r("d21d027c",i,!0,{sourceMap:!1,shadowMode:!1})},"8e16":function(t,e,n){"use strict";n.r(e);var i=n("58a85"),r=n("603d");for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("fec4");var o,s=n("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"51c02975",null,!1,i["a"],o);e["default"]=l.exports},"96cf":function(t,e){!function(e){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag",u="object"===typeof t,c=e.regeneratorRuntime;if(c)u&&(t.exports=c);else{c=e.regeneratorRuntime=u?t.exports:{},c.wrap=w;var f="suspendedStart",d="suspendedYield",g="executing",h="completed",m={},p={};p[o]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(F([])));b&&b!==i&&r.call(b,o)&&(p=b);var y=S.prototype=k.prototype=Object.create(p);A.prototype=y.constructor=S,S.constructor=A,S[l]=A.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===A||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(y),t},c.awrap=function(t){return{__await:t}},C(P.prototype),P.prototype[s]=function(){return this},c.AsyncIterator=P,c.async=function(t,e,n,i){var r=new P(w(t,e,n,i));return c.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},C(y),y[l]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},c.values=F,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,r){return s.type="throw",s.arg=t,e.next=i,r&&(e.method="next",e.arg=n),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:F(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),m}}}function w(t,e,n,i){var r=e&&e.prototype instanceof k?e:k,a=Object.create(r.prototype),o=new O(i||[]);return a._invoke=N(t,n,o),a}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}function k(){}function A(){}function S(){}function C(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function P(t){function e(n,i,a,o){var s=x(t[n],t,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"===typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,a,o)}),(function(t){e("throw",t,a,o)})):Promise.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return e("throw",t,a,o)}))}o(s.arg)}var n;function i(t,i){function r(){return new Promise((function(n,r){e(t,i,n,r)}))}return n=n?n.then(r,r):r()}this._invoke=i}function N(t,e,n){var i=f;return function(r,a){if(i===g)throw new Error("Generator is already running");if(i===h){if("throw"===r)throw a;return R()}n.method=r,n.arg=a;while(1){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=g;var l=x(t,e,n);if("normal"===l.type){if(i=n.done?h:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=h,n.method="throw",n.arg=l.arg)}}}function T(t,e){var i=t.iterator[e.method];if(i===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,T(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=x(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,m;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function F(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){while(++i<t.length)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},"97e2":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADOUlEQVRoQ+2Zz2vUUBDHv5Psdhc9FDzoSSw99KwsCPoHVFfYbdMkVbD2oKJUvfRgRW0VrbbgwYsoIr1oQakJm3S1e+g/IAgLnhRExIqCJ6WFpS758STiwtJutukm2R+SXDMz7/uZGfLeyxA6/KEO148IoNUVdK2ALMu8bdvDHMedBXAYQLJBsT8Nw0jruv7WzV+SpGtENA2Aq2XDGCsDyBPRuKIo36ttagJkMpkdyWQyB+BIg6Kr3SzLsk7mcrmFOgAviOjEVmsxxt6vra0dXF5eLlVsawKIoviA47hLAL7atn3Ztu13jDFrqwVqvec4rpzL5b7V802lUvGenp69lmVt0hOPxycAnKv4G4ZxXtf1J64A2Wx2TyKR+ALABHBAUZRPjQgPwkeSpCkAt5xYRPQLwC7TNGc0TbvuCjAwMDDa1dX1lDH2WlXVTBBCGolRLZ4xNkVEfUQ0ahjGrK7r11wBBgcHr8bj8RkA84qijDayuF+favEAbqqqOi1J0jwRjbQ9QC3xTkI6AsBNfEcAOOKJ6DZjjFXaproV27oC9TJfgWhbgK0yXwGQZfkZgFOmad7VNG2yLb5CXsU7YgVBOMrz/Pj6+vrY0tLS55YDSJI06Zx/3Hre66d409bdjH0gKPF/d+iNpGEDbGibG6qq3vGa7Vp2TQXYTs97hWoaQBjim9ZCYYlvCkBQ4tPpdCKZTPZqmvahur1CbaGhoaEzPM/P+f1UOoJFUZwloiuGYYwsLi4+b8o+IIriaSK6B+C+qqrOEb3hp2VHCee6WCwWjYaV/3NsGYBf4W1/mPMKGFXAa6bCsosqEFZmvcaNKuA1U2HZRRUIK7Ne40YV8JqpsOz+mwp4/r0O4JWiKNmwMrrduLIs5wFkyuXyWD6ff+x6HxAEYXcsFltxBhymaaY0Tfu43cWCthcEoS8WixUB8KVSqbdQKPxwBXBeSJL0kIguMMZWGGMTfkZMfmCIiOc4br9zKSKifYyxR6qqXqx7pXRe9vf37+zu7n4J4JgfAQH7FlZXV4erB3xO/LpjVsuyjvM874xZD/kYs/rh+A3gjWVZczzPLyiKsmnQGE3q/aQ3CN+oAkFk0U+MPw+Kik8qIS/bAAAAAElFTkSuQmCC"},"9aab":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'.header[data-v-51c02975]{padding:%?20?% %?0?%;padding-top:%?0?%}.header .logo[data-v-51c02975]{margin-top:%?20?%;margin-left:%?30?%;margin-bottom:%?10?%;width:%?80?%;height:%?40?%}.header .input_box[data-v-51c02975]{background:#fff;padding:%?0?% %?30?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.header .input_box uni-image[data-v-51c02975]{width:%?32?%;height:%?32?%}.header .input_box uni-input[data-v-51c02975]{height:%?60?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;line-height:%?28?%;margin-left:%?4?%;margin-top:%?-4?%}.header .input_box .cl[data-v-51c02975]{padding-top:%?5?%;color:#aeaeae;font-size:%?28?%;line-height:%?28?%;margin-top:%?2?%}.swiper[data-v-51c02975]{width:100%;height:%?348?%;margin-bottom:%?26?%}.swiper uni-image[data-v-51c02975]{width:100%;height:100%}.nav_box[data-v-51c02975]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-content:space-around;align-content:space-around;padding:%?25?% %?74?%;padding-left:%?70?%;background:#fff;margin-bottom:%?19?%}.nav_box uni-view[data-v-51c02975]{width:%?260?%;height:%?80?%;margin:%?13?% 0}.nav_box uni-view uni-image[data-v-51c02975]{width:100%;height:100%}.recommend_box .recommend_title[data-v-51c02975]{font-family:SourceHanSansCN-Regular;padding-left:%?49?%;font-size:%?40?%;color:#333;line-height:%?58?%;position:relative;margin-bottom:%?10?%}.recommend_box .recommend_title[data-v-51c02975]::after{content:" ";width:1.3px;height:%?30?%;background:#fe7569;position:absolute;top:50%;left:%?34?%;margin-top:%?-20?%}.recommend_box .recommend[data-v-51c02975]{height:%?248?%;background-color:#fff;margin-bottom:%?12?%;padding:%?15?% %?40?% %?15?% %?40?%;display:-webkit-box;display:-webkit-flex;display:flex}.recommend_box .recommend .recommend_img[data-v-51c02975]{width:%?248?%;height:%?248?%;margin-right:%?18?%}.recommend_box .recommend .recommend_txt[data-v-51c02975]{padding:%?15?% 0;-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;position:relative}.recommend_box .recommend .recommend_txt .title[data-v-51c02975]{text-indent:%?-14?%;font-size:%?28?%;color:#000;line-height:%?40?%;text-overflow:-o-ellipsis-lastline;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.recommend_box .recommend .recommend_txt .price[data-v-51c02975]{font-family:Akrobat-Regular;font-size:%?40?%;line-height:%?48?%;color:#000;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.recommend_box .recommend .recommend_txt .price .symbol[data-v-51c02975]{font-size:%?24?%;line-height:%?34?%}.recommend_box .recommend .recommend_txt .price .earn[data-v-51c02975]{font-family:SourceHanSansCN-Regular;font-size:%?24?%;color:#ff8160;line-height:%?36?%;margin-left:%?6?%}.recommend_box .recommend .recommend_txt .price .earn .earn_icon[data-v-51c02975]{font-family:Akrobat-Regular;font-size:%?22?%;line-height:%?36?%;margin-right:%?4?%;margin-top:-2px}.recommend_box .recommend .recommend_txt .price .earn uni-text[data-v-51c02975]{margin-left:%?4?%;font-family:Akrobat-Regular;font-size:%?40?%;line-height:%?40?%}.recommend_box .recommend .recommend_txt uni-image[data-v-51c02975]{width:%?48?%;height:%?48?%;position:absolute;bottom:%?20?%;right:0}.hideCanvasView[data-v-51c02975]{position:relative}.hideCanvas[data-v-51c02975]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}.flex_row_c_c[data-v-51c02975]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.modalView[data-v-51c02975]{width:100%;height:100%;position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;outline:0;-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-perspective:%?2500?%;perspective:%?2500?%;background:rgba(0,0,0,.6);-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:999}.modalView.show[data-v-51c02975]{opacity:1;-webkit-transform:scale(1);transform:scale(1);pointer-events:auto}.flex_column[data-v-51c02975]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.posterImage[data-v-51c02975]{width:60vw;border-radius:%?12?%;overflow:hidden}.flex_row[data-v-51c02975]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.marginTop2vh[data-v-51c02975]{margin-top:2vh}',""]),t.exports=e},c964:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));n("d3b7"),n("e6cf");function i(t,e,n,i,r,a,o){try{var s=t[a](o),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(i,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,l,"next",t)}function l(t){i(o,r,a,s,l,"throw",t)}s(void 0)}))}}},cb29:function(t,e,n){var i=n("23e7"),r=n("81d5"),a=n("44d2");i({target:"Array",proto:!0},{fill:r}),a("fill")},d0ff:function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t){if(Array.isArray(t))return i(t)}n.r(e);n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("fb6a"),n("25f0");function o(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return r(t)||a(t)||o(t)||s()}n.d(e,"default",(function(){return l}))},dc9d:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAD3ElEQVRYR+2WXWhcRRTH/2c22QjWRdmg1lJRKIhYix+1SH1o9UH8qBYU16opEWLcO3Pjkgd9ELGuFfFBH4LNzsw1BoyGGhYUWqz1qaQveZC2Sq2UQkFRFD8SlKhgsrlzZMourHaze3eX6ov36d7d8/Gb/5k5Zwj/8UOd5i8Wi8L7FotF12kM75cYoFQqrU+lUo8z804ANwDIVBMvAviSiA7Ecbw/DMNv2wFqCTA5OXnJ8vLySwBCABfVBf+9+r6m7rc/AZTS6fTLQ0NDvyUBaQowMTFx7crKykEAGwHERFR2zs1kMpnZgYEBv3JMT09nFhcXtwshdjFzDkAKwKmenp4Hh4eHv2oFsSqAMWYdgE8BXEVEXzjnBpRSJ5sF1FpvEkJMM/ONAL4HsEVK+V0zn4YAURT1OufmAGwGcMQ5tzMMw5rkTRdVKpXWCCEOALgLwDEhxNZ8Pl9ZzakhgLX2GWZ+E8BZZt6ilPqllZT1/2utLyMir94GIioEQbAvMUC5XE4vLCz4nXw5M+9QSh1qJ3nNVmt9PxF9BOCnbDa7PpfLLTeKc54C1tp7mPkwgM+klLd0krzmY4w5AeBmIro3CIJPEgForV8nomcB7JFSvtIlwIsA9hLRviAICokAjDHvAtjdjfz/LAMzH1JK7UgEoLU+SEQPMPNmpdTxbhTQWt9KRMf8aZBS3pYIwBhTBvAIM29XSh3tEmAbEc0CmJVS3pkIQGsdEdHTzPykUmqqS4BBInoHwH4p5ROJAIwxIwD8uZ2RUj7WDYAx5n0Au5r1gvOOYRRFVzvnvgbwx9LS0obR0dEfO4EYGxu7oq+v7yyAi4UQ1+Tz+W8SKeCNrLUfMPNDRPRWEAT5TgCstREz+1J+qJR6OHEn9IZa6+uI6CQR9TLzoJTyvXYgjDG7iWiKmSvMvEkpdaYtgCrEU0Q0AaBSraFNAmGtDapzxMMPK6XebubX9D5grd3DzMXqzelj59wLYRh+3ihgqVS6SQjxKoD7ADARFYMg2NsKuuWNyBjjd7Fh5kurwU4z81EhxLk575xbR0TbAFzvv4noV2aWUsqZVsnP2ScxGh8fz6ZSqecBDALoX8VnHsBUHMevjYyMLPip6u1Wm4K1GIkAasblcjk1Pz+/lYg2MvOV1RX/wMyn+vv753K5XFyzNcacBpCuVCq3FwqFn9vehEmUaWZjjPEt2JfmSDabvbsert6vLQXagYqiaK1zzg+ztUT0RhAEzyVuRO0kaqHCHV4BAL2+JUsp/aD723PBFKhl0VqHRDTOzHNKKQ/07wL4bNbaR+M4PtOoh1xwBVqV83+AvwCCvY4wfTDJVgAAAABJRU5ErkJggg=="},fec4:function(t,e,n){"use strict";var i=n("8d42"),r=n.n(i);r.a}}]);